# ğŸ‰ Lua Development Environment (Progressive: Ubuntu â†’ Alpine â†’ Slim)

è¿™æ˜¯ä¸€ä¸ªå¯è¿›åŒ–çš„ Lua å¼€å‘å®¹å™¨é¡¹ç›®ï¼Œæä¾›ä¸‰ä¸ªé˜¶æ®µæ€§çš„é•œåƒç‰ˆæœ¬ï¼šUbuntuã€Alpine å’Œ Alpine Slimï¼Œåˆ†åˆ«é¢å‘ä¸åŒå¼€å‘ä¸éƒ¨ç½²åœºæ™¯ï¼Œé€‚ç”¨äºæœ¬åœ°å¼€å‘ã€POSIX ç¯å¢ƒéªŒè¯ã€ä»¥åŠæœ€ç»ˆåµŒå…¥å¼éƒ¨ç½²ä¼˜åŒ–ã€‚

---

## ğŸ§­ è®¾è®¡ç†å¿µ

æœ¬é¡¹ç›®éµå¾ªä»ã€ŒåŠŸèƒ½ä¸°å¯Œã€åˆ°ã€Œæè‡´ç²¾ç®€ã€çš„é€’è¿›å¼æ„å»ºæ€è·¯ï¼š

1. âœ… **Ubuntu**ï¼šé¢å‘å¼€å‘è€…çš„å…¨åŠŸèƒ½ Lua ç¯å¢ƒï¼ˆæ”¯æŒ LuaRocksã€bash ç­‰ï¼‰
2. âœ… **Alpine**ï¼šè½»é‡çº§ POSIX Lua ç¯å¢ƒï¼Œæ¥è¿‘åµŒå…¥å¼ç³»ç»Ÿè¿è¡Œå½¢æ€
3. âœ… **Alpine Slim**ï¼šçº¯ Lua ç²¾ç®€é•œåƒï¼ˆæ—  LuaRocksã€æ—  bashï¼‰ï¼Œä¸ºåµŒå…¥å¼éƒ¨ç½²æ‰“åŸºç¡€

ç›®æ ‡æ˜¯é€æ­¥å‹ç¼©ç¯å¢ƒè§„æ¨¡ï¼Œæœ€ç»ˆå¯¼å‘ä¸€ä¸ªå¯æ‰‹å·¥è£å‰ªçš„ Lua ç¨‹åºä¸ POSIX C åº“ï¼Œæ»¡è¶³å¯¹èµ„æºæ•æ„Ÿçš„åµŒå…¥å¼è®¾å¤‡éƒ¨ç½²éœ€æ±‚ã€‚

---

## ğŸ”§ åŠŸèƒ½ç‰¹æ€§

- æä¾›ä¸‰ç§æ„å»ºé€‰é¡¹ï¼š
  - `ubuntu:latest`ï¼šåŠŸèƒ½æœ€å…¨ï¼Œé€‚åˆå¼€å‘ä¸æµ‹è¯•
  - `alpine:latest`ï¼šç´§å‡‘ POSIX ç¯å¢ƒï¼Œå¯éªŒè¯å…¼å®¹æ€§
  - `alpine.slim`ï¼šæ„å»ºåçš„æœ€å°çº¯ Lua é•œåƒï¼Œç”¨äºå°è£…æˆ–åµŒå…¥éƒ¨ç½²
- è‡ªåŠ¨å®‰è£…æœ€æ–° **Lua**
- å¯é€‰å®‰è£… **LuaRocks**ï¼ˆUbuntu/Alpineï¼‰
- å¯åŠ¨æ—¶è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯ã€æ¨¡å—ã€è·¯å¾„ç­‰
- é»˜è®¤å·¥ä½œç›®å½• `/app`ï¼Œæ–¹ä¾¿æŒ‚è½½é¡¹ç›®
- å¯åŠ¨è„šæœ¬æ”¯æŒç»ˆç«¯å±…ä¸­ã€å½©è‰²è¾“å‡ºï¼ˆå« `tput`ï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºé•œåƒ

```bash
# Ubuntu
docker build -t my-lua-dev -f Dockerfile .

# Alpine
docker build -t my-lua-dev-alpine -f Dockerfile.alpine .

# Alpine Slim
docker build -t my-lua-dev-slim -f Dockerfile.alpine.slim .
```

---

### 2. è¿è¡Œå®¹å™¨

```bash
# Ubuntu
docker run -it --rm my-lua-dev

# Alpine
docker run -it --rm my-lua-dev-alpine

# Slim
docker run -it --rm my-lua-dev-slim
```

---

## ğŸ“ é¡¹ç›®æŒ‚è½½å»ºè®®

å°†æœ¬åœ°é¡¹ç›®æŒ‚è½½è‡³ `/app`ï¼Œå®¹å™¨å¯åŠ¨åé»˜è®¤è¿›å…¥ï¼š

```bash
# Ubuntu ç‰ˆæœ¬
docker run -it --rm -v $(pwd):/app my-lua-dev

# Alpine ç‰ˆæœ¬
docker run -it --rm -v $(pwd):/app my-lua-dev-alpine

# Alpine Slim ç‰ˆæœ¬
docker run -it --rm -v $(pwd):/app my-lua-dev-slim
```

---

## ğŸ“œ å¯åŠ¨è„šæœ¬è¡Œä¸º

é»˜è®¤æ‰§è¡Œ `/usr/local/bin/start-lua`ï¼Œè„šæœ¬è¡Œä¸ºå› é•œåƒè€Œå¼‚ï¼š

- Ubuntu ä¸ Alpine ç‰ˆæœ¬ï¼š
  - ä½¿ç”¨ bash æ‰§è¡Œ
  - è¾“å‡º Lua ä¸ LuaRocks ç‰ˆæœ¬ã€æ¨¡å—åˆ—è¡¨ã€åŒ…è·¯å¾„
  - å¯åŠ¨äº¤äº’å¼ bash shell

- Alpine Slim ç‰ˆæœ¬ï¼š
  - ä½¿ç”¨ sh æ‰§è¡Œ
  - è¾“å‡º Lua ç‰ˆæœ¬ä¸è·¯å¾„ï¼ˆæ—  LuaRocksï¼‰
  - å¯åŠ¨æç®€ `/bin/sh` ç»ˆç«¯

---

## ğŸ§© å¯æ‰©å±•å»ºè®®

- é¢„è£…å¸¸ç”¨æ¨¡å—ï¼ˆå¦‚ luasocketã€luasecï¼‰
- æ·»åŠ  CI æ”¯æŒæˆ–äº¤å‰ç¼–è¯‘å·¥å…·é“¾
- ä½¿ç”¨ Alpine Slim é•œåƒæ„å»ºå®šåˆ¶ Lua ç¨‹åºï¼ˆå¦‚å•æ–‡ä»¶å‘å¸ƒï¼‰

---

## ğŸ·ï¸ é•œåƒæ„å»ºå¯¹ç…§è¡¨

| ç‰ˆæœ¬         | æ„å»ºæ–‡ä»¶               | é•œåƒæ ‡ç­¾            | ç‰¹ç‚¹                         |
|--------------|------------------------|---------------------|------------------------------|
| Ubuntu       | `Dockerfile`           | `my-lua-dev`        | å…¨åŠŸèƒ½ Lua å¼€å‘ç¯å¢ƒ         |
| Alpine       | `Dockerfile.alpine`    | `my-lua-dev-alpine` | POSIX ç²¾ç®€ Lua ç¯å¢ƒ         |
| Alpine Slim  | `Dockerfile.alpine.slim`| `my-lua-dev-slim`  | æç®€çº¯ Lua è¿è¡Œç¯å¢ƒï¼ˆåµŒå…¥å¼ï¼‰|

---

## ğŸ“¦ åç»­æ–¹å‘ï¼ˆå»ºè®®ï¼‰

- æ„å»ºé™æ€é“¾æ¥çš„ Lua VM
- æ‰‹å·¥é›†æˆæ‰€éœ€ POSIX C åº“
- å®ç°ä»…éœ€ `/bin/sh + lua` çš„è£¸è¿è¡Œæ—¶
- æ„å»ºè·¨æ¶æ„ï¼ˆå¦‚ armv7, mipsï¼‰åµŒå…¥å¼æ”¯æŒç‰ˆæœ¬

---

## ğŸ“† License

è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹ä¸åˆ†äº«ï¼Œæ— é™åˆ¶ã€‚
