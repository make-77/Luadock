# ğŸ‰ Lua Development Environment (Ubuntu & Alpine based)

è¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ Lua å¼€å‘å®¹å™¨é¡¹ç›®ï¼Œæä¾›ä¸¤ä¸ªåŸºç¡€é•œåƒç‰ˆæœ¬ï¼ˆUbuntu ä¸ Alpineï¼‰ï¼Œè‡ªåŠ¨æ„å»ºå¹¶é…ç½®æœ€æ–°ç‰ˆæœ¬çš„ Lua å’Œ LuaRocksï¼Œé€‚åˆæœ¬åœ°å¼€å‘ã€æ•™å­¦æ¼”ç¤ºã€æ¨¡å—æµ‹è¯•ç­‰ç”¨é€”ã€‚

---

## ğŸ”§ åŠŸèƒ½ç‰¹æ€§

- æä¾›ä¸¤ä¸ªå¯é€‰æ„å»ºç‰ˆæœ¬ï¼š
  - `ubuntu:latest`ï¼ˆåŠŸèƒ½å®Œæ•´ï¼Œé€‚åˆé€šç”¨å¼€å‘ï¼‰
  - `alpine:latest`ï¼ˆé•œåƒæå°ï¼Œé€‚åˆè½»é‡åœºæ™¯ï¼‰
- è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆæœ¬ **Lua**
- è‡ªåŠ¨å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ **LuaRocks**
- è‡ªåŠ¨é…ç½®å¤´æ–‡ä»¶æ”¯æŒï¼ˆä¾¿äºç¼–è¯‘ Lua æ‰©å±•ï¼‰
- å¯åŠ¨æ—¶ç¾è§‚å±•ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€æ¨¡å—åˆ—è¡¨ã€åŒ…è·¯å¾„ç­‰
- é»˜è®¤è¿›å…¥ `/app` ç›®å½•ï¼Œé€‚åˆæŒ‚è½½é¡¹ç›®

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºé•œåƒ

#### Ubuntu ç‰ˆæœ¬ï¼š

```bash
docker build -t my-lua-dev -f Dockerfile .
```

#### Alpine ç‰ˆæœ¬ï¼š

```bash
docker build -t my-lua-dev-alpine -f Dockerfile.alpine .
```

---

### 2. è¿è¡Œå®¹å™¨

#### Ubuntu ç‰ˆï¼š

```bash
docker run -it --rm my-lua-dev
```

#### Alpine ç‰ˆï¼š

```bash
docker run -it --rm my-lua-dev-alpine
```

å¯åŠ¨åå°†è‡ªåŠ¨æ˜¾ç¤º Lua ç¯å¢ƒä¿¡æ¯ï¼Œå¹¶è¿›å…¥äº¤äº’å¼ç»ˆç«¯ã€‚

---

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„å»ºè®®

æ¨èå°†å®¿ä¸»æœºçš„ Lua é¡¹ç›®æºæ–‡ä»¶æŒ‚è½½è‡³ `/app`ï¼Œå®¹å™¨è¿è¡Œåé»˜è®¤è¿›å…¥æ­¤ç›®å½•ï¼š

```bash
docker run -it --rm -v $(pwd):/app my-lua-dev
# æˆ–
docker run -it --rm -v $(pwd):/app my-lua-dev-alpine
```

---

## ğŸ“œ å¯åŠ¨è„šæœ¬è¡Œä¸º

å®¹å™¨é»˜è®¤æ‰§è¡Œ `/usr/local/bin/start-lua`ï¼Œæ‰§è¡Œè¡Œä¸ºï¼š

- æ¸…å±å¹¶å±…ä¸­æ‰“å°æ¬¢è¿ä¿¡æ¯
- è¾“å‡ºç¯å¢ƒä¿¡æ¯ï¼š
  - Lua ç‰ˆæœ¬
  - LuaRocks ç‰ˆæœ¬
  - å·²å®‰è£…çš„ LuaRocks æ¨¡å—
  - `package.path` ä¸ `package.cpath`
- æœ€åé™„å¸¦è¿›å…¥ Bash äº¤äº’ç»ˆç«¯ï¼Œä½äº `/app`

---

## ğŸ§¹ å¯æ‰©å±•å»ºè®®

- å¯åœ¨ Dockerfile ä¸­é¢„è£…å¸¸ç”¨ Lua æ¨¡å—ï¼ˆå¦‚ `luasocket`, `luasec`, `busted` ç­‰ï¼‰
- è‡ªå®šä¹‰å¯åŠ¨è„šæœ¬ï¼ˆæ¯”å¦‚æ”¹ä¸ºæ‰§è¡ŒæŸä¸ª Lua æ–‡ä»¶ï¼‰
- å¯ç”¨äº CI æµ‹è¯• Lua æ¨¡å—ç¼–è¯‘ä¸è¿è¡Œç¯å¢ƒ

---

## ğŸ·ï¸ æ ‡ç­¾å»ºè®®ï¼ˆæ„å»ºäº§ç‰©ï¼‰

| ç‰ˆæœ¬       | æ„å»ºæ–‡ä»¶           | é•œåƒæ ‡ç­¾             |
|------------|--------------------|----------------------|
| Ubuntu     | `Dockerfile`       | `my-lua-dev`         |
| Alpine     | `Dockerfile.alpine`| `my-lua-dev-alpine`  |

---

## ğŸ“† License

è‡ªç”±ä½¿ç”¨ä¸ä¿®æ”¹ï¼Œæ— é™åˆ¶ã€‚
